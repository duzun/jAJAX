(function(G,u,z,v,J,A){("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(r,g){module.exports=g()}:function(r,g){u[G]=g()})([],function(){function r(e){return null===e?"Null":void 0===e?"Undefined":K.call(e).slice(8,-1)}function g(e){return e instanceof J||"Function"==r(e)}function n(e,a){if(!e)return e;var f;(f=B(e))||(f=C.call(e,"length")&&"number"===typeof e.length&&!g(e));if(f){var b=0;for(f=e.length>>>0;b<f;b++)if(C.call(e,b)){var k=e[b];if(!1===
a.call(k,b,k,e))return b}}else for(b in e)if(C.call(e,b)&&(f=e[b],!1===a.call(f,b,f,e)))return b;return e}function L(e){var a=function(a,b){e[a]=b};n(arguments,function(e,b){e&&n(b,a)});return e}var H=z.noop||function(){},D=z.prototype,C=D.hasOwnProperty,K=D.toString,M="function"==typeof A.now?function(){return A.now()}:function(){return new A.getTime},B=g(v.isArray)?v.isArray:v.isArray=function(e){return e instanceof v||"Array"==r(e)},h="undefined"!==typeof self&&g(self.setTimeout)?self:u;g(h.setTimeout)||
"undefined"!==typeof require&&(h=require("sdk/timers"));var E=h.setTimeout,N=h.clearTimeout,I={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};h=function p(a,f,b,k){var d=p.createXHR(!1);if(!d)return b&&b(null,"xhr","Couldn't create XHR object"),d;"String"==r(a)&&(f&&"Object"==r(f)?(f.url=a,a=f,f=b,b=k):a={url:a});a=L({url:"",type:"GET",cache:!1,timeout:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"",
mimeType:"",data:null,headers:null,error:null,success:null},a);var h={};k=function(a,b){h[a.toLowerCase()]=[a,b]};var c=a.method||a.type,l=a.url,t,w,x=function(m,c,f,d){a.error&&a.error(f||d,c,m,d);b&&b(f||d,c,m,d)},g=function(m,c,b){var d=a.dataType||a.mimeType&&p.mimeToDataType(a.mimeType)||w;try{switch(d){case "json":c="responseJSON"in m?m.responseJSON:/^\s*$/.test(c)?null:p.parseJSON(c);break;case "xml":c=m.responseXML;break;case "script":(0,eval)(c)}}catch(P){var l=P}l?x(l,"parsererror",m,b):
(a.success&&a.success(c,m.statusText,m,b),f&&f(c,m.statusText,m,b))},F=function(a,c){t&&N(t);var b=a.responseText||a.response;w=p.mimeToDataType(a.getResponseHeader("content-type"));if("json"==w&&!("responseJSON"in a))if(/^\s*$/.test(b))a.responseJSON=null;else try{a.responseJSON=p.parseJSON(b)}catch(Q){}200<=a.status&&300>a.status||304==a.status?g(a,b,c):x(a.statusText||null,a.status?"error":"abort",a,c)};n({"X-Requested-With":"XMLHttpRequest"},k);a.contentType&&k("Content-Type",a.contentType);k("Accept",
(I[a.dataType]?I[a.dataType]+", ":"")+"*/*; q=0.01");n(a.headers,k);c=c.toLowerCase();!a.data||"get"!=c&&"head"!=c||(l+=(0>l.indexOf("?")?"?":"&")+p.param(a.data),a.data=null);if("REQUEST"==p.xhr_type){n(a.data,function(a,c,b){null==c&&delete b[a]});var q={url:l,content:a.data||{},headers:{},onComplete:function(a){q.aborted||F({getResponseHeader:function(c){return a.headers[c]},status:a.status,statusText:a.statusText,responseText:a.text,responseJSON:a.json},a)}};n(h,function(a,c){c[0]&&null!=c[0]&&
(q.headers[c[0]]=c[1])});a.contentType&&(q.contentType=a.contentType);0<a.timeout&&(t=E(function(){q.aborted=M();x(null,"timeout",d)},a.timeout));try{d.Request(q)[c]()}catch(m){try{q.headers["X-HTTP-Method-Override"]=c.toUpperCase(),d.Request(q).post()}catch(O){switch(c){case "delete":var y=new (require("sdk/net/xhr").XMLHttpRequest);y.open(c,l);n(q.headers,function(a,c){y.setRequestHeader(a,c)});y.send();F(y);break;default:throw O;}}}}else d.open(c,l,!0),n(h,function(a,c){null!=c[1]&&d.setRequestHeader(c[0],
c[1]+"")}),0<a.timeout&&(t=E(function(){d.onreadystatechange=H;d.abort();x(null,"timeout",d)},a.timeout)),k=function(){4==d.readyState&&(d.onreadystatechange=H,F(d))},d.send(a.data?"string"==typeof a.data?a.data:p.param(a.data):null),4===d.readyState?E(k):d.onreadystatechange=k;return d};(function(a,f,b){function k(a,b,d,f){var c=B(b),h=b&&b!==u&&!c&&z.getPrototypeOf(b)===D;n(b,function(b,l){var g=B(l)?"array":typeof l;f&&(b=d?f:f+"["+(h||"object"==g||"array"==g?b:"")+"]");!f&&c?a.add(l.name,l.value):
"array"==g||!d&&"object"==g?k(a,l,d,b):a.add(b,l)})}b.param=function(c,b){var d=[];d.add=function(c,b){this.push(a(c)+(null==b?"":"="+a(b)))};k(d,c,b);return d.join("&").replace(/%20/g,"+")};var h=/^(?:text|application)\/javascript/i,d=/^(?:text|application)\/xml/i;b.mimeToDataType=function(a){a&&(a=a.split(";",2)[0]);return a&&("text/html"==a?"html":"application/json"==a?"json":h.test(a)?"script":d.test(a)&&"xml")||"text"};var g=f&&f.parse||u.json_decode;b.parseJSON=function(a){try{return g(a)}catch(t){var b=
a.replace(/[\n\r]+\s*\/\/[^\n\r]*/g,"");if(b!=a)return g(b);throw t;}};b.createXHR=function(a){n({XMLHttpRequest:function(){return new u.XMLHttpRequest},MSXML2:function(){return new ActiveXObject("Msxml2.XMLHTTP")},MSXML:function(){return new ActiveXObject("Microsoft.XMLHTTP")},MSXML24:function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},REQUEST:function(){return require("sdk/request")}},function(c,d){try{return a=d(),b.createXHR=d,b.xhr_type=c,!1}catch(w){}});return a};b.xhr_supported=b.createXHR(!1)})(encodeURIComponent,
JSON,h);h.name=G;h.version="1.3.0";return h})})("jajax","undefined"==typeof global?this:global,Object,Array,Function,Date);
