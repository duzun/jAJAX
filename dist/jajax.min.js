(function(J,r,B,y,N,C){("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(w,k){module.exports=k()}:function(w,k){r[J]=k()})([],function(){function w(e){return null===e?"Null":void 0===e?"Undefined":O.call(e).slice(8,-1)}function k(e){return e instanceof N||"Function"==w(e)}function n(e,a){if(!e)return e;var f;(f=D(e))||(f=E.call(e,"length")&&"number"===typeof e.length&&!k(e));if(f){var b=0;for(f=e.length>>>0;b<f;b++)if(E.call(e,b)){var l=e[b];if(!1===
a.call(l,b,l,e))return b}}else for(b in e)if(E.call(e,b)&&(f=e[b],!1===a.call(f,b,f,e)))return b;return e}function P(e){var a=function(a,b){e[a]=b};n(arguments,function(e,b){e&&n(b,a)});return e}var K=B.noop||function(){},F=B.prototype,E=F.hasOwnProperty,O=F.toString,Q="function"==typeof C.now?function(){return C.now()}:function(){return new C.getTime},D=k(y.isArray)?y.isArray:y.isArray=function(e){return e instanceof y||"Array"==w(e)},g="undefined"!==typeof self&&k(self.setTimeout)?self:r;k(g.setTimeout)||
"undefined"!==typeof require&&(g=require("sdk/timers"));var G=g.setTimeout,R=g.clearTimeout,L=/^\s*$/,M={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};g=function t(a,f,b,l){var d=t.createXHR(!1);if(!d)return b&&b(null,"xhr","Couldn't create XHR object"),d;"String"==w(a)&&(f&&"Object"==w(f)?(f.url=a,a=f,f=b,b=l):a={url:a});a=P({url:"",type:"GET",cache:!1,timeout:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
dataType:"",mimeType:"",data:null,headers:null,error:null,success:null},a);var g={};l=function(h,a){g[h.toLowerCase()]=[h,a]};var c=a.method||a.type,x=a.url,m,z,H,k,A=function(h,p,c,d){a.error&&a.error(c||d,p,h,d);b&&b(c||d,p,h,d);k&&(h||(p?(h=Error("jajax error: "+p),h.type=p):h=Error("jajax error: unknown"),h.xhr=c||d,h.response=d),k(h))},T=function(h,c,b){var d=a.dataType||a.mimeType&&t.mimeToDataType(a.mimeType)||z;try{switch(d){case "json":c="responseJSON"in h?h.responseJSON:L.test(c)?null:t.parseJSON(c);
break;case "xml":c=h.responseXML;break;case "script":L.test(c)||(0,eval)(c)}}catch(S){var p=S}p?A(p,"parsererror",h,b):(a.success&&a.success(c,h.statusText,h,b),f&&f(c,h.statusText,h,b),H&&H(c))},I=function(a,c){m&&R(m);var b=a.responseText||a.response;z=t.mimeToDataType(a.getResponseHeader("content-type"));if("json"==z&&!("responseJSON"in a))if(/^\s*$/.test(b))a.responseJSON=null;else try{a.responseJSON=t.parseJSON(b)}catch(U){}200<=a.status&&300>a.status||304==a.status?T(a,b,c):A(a.statusText||
null,a.status?"error":"abort",a,c)};if("function"==typeof Promise){var v=new Promise(function(a,c){H=a;k=c});var r=v.then.bind(v);v=v["catch"].bind(v)}n({"X-Requested-With":"XMLHttpRequest"},l);a.contentType&&l("Content-Type",a.contentType);l("Accept",(M[a.dataType]?M[a.dataType]+", ":"")+"*/*; q=0.01");n(a.headers,l);c=c.toLowerCase();!a.data||"get"!=c&&"head"!=c||(x+=(0>x.indexOf("?")?"?":"&")+t.param(a.data),a.data=null);if("REQUEST"==t.xhr_type){n(a.data,function(a,c,b){null==c&&delete b[a]});
var u={url:x,content:a.data||{},headers:{},onComplete:function(a){u.aborted||I({getResponseHeader:function(c){return a.headers[c]},status:a.status,statusText:a.statusText,responseText:a.text,responseJSON:a.json},a)}};n(g,function(a,c){c[0]&&null!=c[0]&&(u.headers[c[0]]=c[1])});a.contentType&&(u.contentType=a.contentType);0<a.timeout&&(m=G(function(){u.aborted=Q();A(null,"timeout",d)},a.timeout));try{var q=d.Request(u);q[c]()}catch(h){try{u.headers["X-HTTP-Method-Override"]=c.toUpperCase(),q=d.Request(u),
q.post()}catch(p){switch(c){case "delete":q=new (require("sdk/net/xhr").XMLHttpRequest);q.open(c,x);n(u.headers,function(a,c){q.setRequestHeader(a,c)});q.send();I(q);break;default:throw p;}}}q&&(d=q)}else d.open(c,x,!0),n(g,function(a,c){null!=c[1]&&d.setRequestHeader(c[0],c[1]+"")}),0<a.timeout&&(m=G(function(){d.onreadystatechange=K;d.abort();A(null,"timeout",d)},a.timeout)),l=function(){4==d.readyState&&(d.onreadystatechange=K,I(d))},d.send(a.data?"string"==typeof a.data?a.data:t.param(a.data):
null),4===d.readyState?G(l):d.onreadystatechange=l;r&&!d.then&&(d.then=r,v&&(d["catch"]=v));return d};(function(a,f,b){function l(a,b,d,f){var c=D(b),k=b&&b!==r&&!c&&B.getPrototypeOf(b)===F;n(b,function(b,g){var m=D(g)?"array":typeof g;f&&(b=d?f:f+"["+(k||"object"==m||"array"==m?b:"")+"]");!f&&c?a.add(g.name,g.value):"array"==m||!d&&"object"==m?l(a,g,d,b):a.add(b,g)})}b.param=function(c,b){var d=[];d.add=function(c,b){this.push(a(c)+(null==b?"":"="+a(b)))};l(d,c,b);return d.join("&").replace(/%20/g,
"+")};var g=/^(?:text|application)\/javascript/i,d=/^(?:text|application)\/xml/i;b.mimeToDataType=function(a){a&&(a=a.split(";",2)[0]);return a&&("text/html"==a?"html":"application/json"==a?"json":g.test(a)?"script":d.test(a)&&"xml")||"text"};var k=f&&f.parse||r.json_decode;b.parseJSON=function(a){try{return k(a)}catch(m){var b=a.replace(/[\n\r]+\s*\/\/[^\n\r]*/g,"");if(b!=a)return k(b);throw m;}};b.createXHR=function(a){n({XMLHttpRequest:function(){return new r.XMLHttpRequest},MSXML2:function(){return new ActiveXObject("Msxml2.XMLHTTP")},
MSXML:function(){return new ActiveXObject("Microsoft.XMLHTTP")},MSXML24:function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},REQUEST:function(){return require("sdk/request")},node_XMLHttpRequest:function(){return new (require("xmlhttprequest").XMLHttpRequest)}},function(c,d){try{return a=d(),b.createXHR=d,b.xhr_type=c,!1}catch(z){}});return a};b.xhr_supported=b.createXHR(!1)})(encodeURIComponent,JSON,g);g.name=J;g.version="1.3.3";return g})})("jajax","undefined"==typeof global?this:global,Object,
Array,Function,Date);
