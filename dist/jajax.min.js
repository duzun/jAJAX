(function(J,r,B,y,N,C){("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(w,k){module.exports=k()}:function(w,k){r[J]=k()})([],function(){function w(f){return null===f?"Null":void 0===f?"Undefined":O.call(f).slice(8,-1)}function k(f){return f instanceof N||"Function"==w(f)}function n(f,a){if(!f)return f;var g;(g=D(f))||(g=E.call(f,"length")&&"number"===typeof f.length&&!k(f));if(g){var c=0;for(g=f.length>>>0;c<g;c++)if(E.call(f,c)){var l=f[c];if(!1===
a.call(l,c,l,f))return c}}else for(c in f)if(E.call(f,c)&&(g=f[c],!1===a.call(g,c,g,f)))return c;return f}function P(f){var a=function(a,c){f[a]=c};n(arguments,function(f,c){f&&n(c,a)});return f}var K=B.noop||function(){},F=B.prototype,E=F.hasOwnProperty,O=F.toString,Q="function"==typeof C.now?function(){return C.now()}:function(){return new C.getTime},D=k(y.isArray)?y.isArray:y.isArray=function(f){return f instanceof y||"Array"==w(f)},h="undefined"!==typeof self&&k(self.setTimeout)?self:r;k(h.setTimeout)||
"undefined"!==typeof require&&(h=require("sdk/timers"));var G=h.setTimeout,R=h.clearTimeout,L=/^\s*$/,M={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};h=function t(a,g,c,l){"String"==w(a)&&(g&&"Object"==w(g)?(g.url=a,a=g,g=c,c=l):a={url:a});a=P({url:"",type:"GET",cache:!1,timeout:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"",mimeType:"",data:null,headers:null,error:null,success:null},a);!g&&
a.success&&(g=a.success,delete a.success);!c&&a.error&&(c=a.error,delete a.error);var d=t.createXHR(!1);if(!d)return c&&c(null,"xhr",Error("Couldn't create XHR object")),d;var h={};l=function(e,a){h[e.toLowerCase()]=[e,a]};var b=a.method||a.type,x=a.url,m,z,H,k,A=function(e,p,b,d){e||(e=b&&b.statusText)||(e="jajax error: "+(p||"unknown"));"string"==typeof e&&(e=Error(e));e&&(p&&(e.type=p),b&&b.status&&(e.status=b.status));a.error&&a.error(b||d,p,e,d);c&&c(b||d,p,e,d);k&&(e&&(e.xhr=b||d,e.response=
d),k(e))},T=function(e,b,c){var d=a.dataType||a.mimeType&&t.mimeToDataType(a.mimeType)||z;try{switch(d){case "json":b="responseJSON"in e?e.responseJSON:L.test(b)?null:t.parseJSON(b);break;case "xml":b=e.responseXML;break;case "script":L.test(b)||(0,eval)(b)}}catch(S){var p=S}p?A(p,"parsererror",e,c):(a.success&&a.success(b,e.statusText,e,c),g&&g(b,e.statusText,e,c),H&&H(b))},I=function(a,b){m&&R(m);var e=a.responseText||a.response;z=t.mimeToDataType(a.getResponseHeader("content-type"));if("json"==
z&&!("responseJSON"in a))if(/^\s*$/.test(e))a.responseJSON=null;else try{a.responseJSON=t.parseJSON(e)}catch(U){}200<=a.status&&300>a.status||304==a.status?T(a,e,b):A(a.statusText||null,a.status?"error":"abort",a,b)};if(!g&&!c&&"function"==typeof Promise){var v=new Promise(function(a,b){H=a;k=b});var r=v.then.bind(v);v=v["catch"].bind(v)}n({"X-Requested-With":"XMLHttpRequest",Accept:(M[a.dataType]?M[a.dataType]+", ":"")+"*/*; q=0.01"},l);a.contentType&&l("Content-Type",a.contentType);n(a.headers,
l);b=b.toLowerCase();!a.data||"get"!=b&&"head"!=b||(x+=(0>x.indexOf("?")?"?":"&")+t.param(a.data),a.data=null);if("REQUEST"==t.xhr_type){n(a.data,function(a,b,c){null==b&&delete c[a]});var u={url:x,content:a.data||{},headers:{},onComplete:function(a){u.aborted||I({getResponseHeader:function(b){return a.headers[b]},status:a.status,statusText:a.statusText,responseText:a.text,responseJSON:a.json},a)}};n(h,function(a,b){b[0]&&null!=b[0]&&(u.headers[b[0]]=b[1])});a.contentType&&(u.contentType=a.contentType);
0<a.timeout&&(m=G(function(){u.aborted=Q();A(null,"timeout",d)},a.timeout));try{var q=d.Request(u);q[b]()}catch(e){try{u.headers["X-HTTP-Method-Override"]=b.toUpperCase(),q=d.Request(u),q.post()}catch(p){switch(b){case "delete":q=new (require("sdk/net/xhr").XMLHttpRequest);q.open(b,x);n(u.headers,function(a,b){q.setRequestHeader(a,b)});q.send();I(q);break;default:throw p;}}}q&&(d=q)}else d.open(b,x,!0),n(h,function(a,b){null!=b[1]&&d.setRequestHeader(b[0],b[1]+"")}),0<a.timeout&&(m=G(function(){d.onreadystatechange=
K;d.abort();A(null,"timeout",d)},a.timeout)),l=function(){4==d.readyState&&(d.onreadystatechange=K,I(d))},d.send(a.data?"string"==typeof a.data?a.data:t.param(a.data):null),4===d.readyState?G(l):d.onreadystatechange=l;r&&!d.then&&(d.then=r,v&&(d["catch"]=v));return d};(function(a,g,c){function l(a,c,d,g){var b=D(c),k=c&&c!==r&&!b&&B.getPrototypeOf(c)===F;n(c,function(c,h){var m=D(h)?"array":typeof h;g&&(c=d?g:g+"["+(k||"object"==m||"array"==m?c:"")+"]");!g&&b?a.add(h.name,h.value):"array"==m||!d&&
"object"==m?l(a,h,d,c):a.add(c,h)})}c.param=function(b,c){var d=[];d.add=function(b,c){this.push(a(b)+(null==c?"":"="+a(c)))};l(d,b,c);return d.join("&").replace(/%20/g,"+")};var h=/^(?:text|application)\/javascript/i,d=/^(?:text|application)\/xml/i;c.mimeToDataType=function(a){a&&(a=a.split(";",2)[0]);return a&&("text/html"==a?"html":"application/json"==a?"json":h.test(a)?"script":d.test(a)&&"xml")||"text"};var k=g&&g.parse||r.json_decode;c.parseJSON=function(a){try{return k(a)}catch(m){var b=a.replace(/[\n\r]+\s*\/\/[^\n\r]*/g,
"");if(b!=a)return k(b);throw m;}};c.createXHR=function(a){n({XMLHttpRequest:function(){return new r.XMLHttpRequest},MSXML2:function(){return new ActiveXObject("Msxml2.XMLHTTP")},MSXML:function(){return new ActiveXObject("Microsoft.XMLHTTP")},MSXML24:function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},REQUEST:function(){return require("sdk/request")},node_XMLHttpRequest:function(){return new (require("xmlhttprequest").XMLHttpRequest)}},function(b,d){try{return a=d(),c.createXHR=d,c.xhr_type=
b,!1}catch(z){}});return a};c.xhr_supported=c.createXHR(!1)})(encodeURIComponent,JSON,h);h.name=J;h.version="1.4.0";return h})})("jajax","undefined"==typeof global?this:global,Object,Array,Function,Date);
